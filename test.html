<!DOCTYPE html>
<meta charset="utf-8">
<style>

    path {
        fill: none;
        stroke: #000;
        stroke-width: .5px;
    }

    .land-boundary {
        stroke-width: 1px;
    }

    .county-boundary {
        stroke: #aaa;
    }

</style>
<body>
<script src="//d3js.org/d3.v3.min.js"></script>
<script src="//d3js.org/topojson.v1.min.js"></script>
<script>

    var width = 960,
            height = 500;

    var projection = d3.geo.mercator()
            .scale(10);
            //.translate([width / 2, height / 2]);

    var path = d3.geo.path().projection(projection);

    var svg = d3.select("body").append("svg")
            .attr("width", width)
            .attr("height", height);

    d3.json("lib/optimizedData.json", function(error, data) {
        if (error) throw error;
        console.log(data);
        var rcensusBlocks = Object.keys(data);
        console.log(rcensusBlocks);
        d3.json("lib/king10bg.json", function(error, topology) {
            if (error) throw error;

//            var sTopojson = topology;
//            sTopojson.objects.kcblock.geometries = topology.objects.kcblock.geometries.filter(function(value) {
//                return (rcensusBlocks.indexOf(value.properties.GEOID10) !== -1)
//            });
//
//            console.log(JSON.stringify(sTopojson));
//
//            console.log(sTopojson);

            console.log(topology);

            svg.append("g")
                .selectAll("path")
                .data(topojson.feature(topology, topology.objects.king10bg).features)
                .enter().append("path")
                .attr("class", "county-boundary")
                .attr("d", path)
        });
    });

//    d3.json("lib/kcblock2.topojson", function(error, topology) {
//        if (error) throw error;
//        console.log(topology.objects);

//        svg.append("path")
//                .datum(topojson.feature(topology, topology.objects.kcblock))
//                .attr("d", path)
//                .attr("class", "land-boundary");

//        svg.append("path")
//                .datum(topojson.mesh(topology, topology.objects.counties, function(a, b) { return a !== b && (a.id / 1000 | 0) === (b.id / 1000 | 0); }))
//                .attr("d", path)
//                .attr("class", "county-boundary");
//
//        svg.append("path")
//                .datum(topojson.mesh(topology, topology.objects.states, function(a, b) { return a !== b; }))
//                .attr("d", path)
//                .attr("class", "state-boundary");
//    });

</script>